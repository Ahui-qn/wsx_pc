(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbf58768"],{"09b9":function(t,e,a){"use strict";a("0e1f")},"0e1f":function(t,e,a){},1551:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"ordering"},[a("div",{staticClass:"heading"},[t._v("菜品管理")]),a("div",{staticClass:"content-view"},[a("div",{staticClass:"button-view"},[a("router-link",{attrs:{to:{name:"upload"}}},[a("el-button",{attrs:{type:"success",size:"medium"}},[t._v("添加菜品")])],1)],1),t.nodatas?a("div",[a("div",{staticClass:"tab-list"},t._l(t.tablist,(function(e,s){return a("span",{key:s},[t._v(t._s(e))])})),0),t._l(t.tabcont,(function(e,s){return a("div",{key:s,staticClass:"tab-table"},[a("div",[t._v(t._s(e.time))]),a("div",[t._v(t._s(e.category))]),a("div",[t._v(t._s(e.name))]),a("div",[a("el-image",{staticClass:"elimg",attrs:{src:e.image[0].url,fit:"cover",lazy:!0,"preview-src-list":[e.image[0].url]}})],1),a("div",[t._v(t._s(e.unitprice))]),a("div",[a("el-button",{attrs:{size:"small",disabled:!e.onsale},on:{click:function(a){return t.edIt(e)}}},[t._v("编辑")]),e.onsale?a("el-button",{attrs:{type:"danger",size:"small",loading:s==t.shelfload,disabled:s==t.shelfload},on:{click:function(a){return t.shelf(e._id,s,e.cid)}}},[t._v("下架")]):a("el-button",{attrs:{type:"warning",size:"small",disabled:""}},[t._v("已下架")])],1)])})),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","hide-on-single-page":!0,total:t.total},on:{"current-change":t.currentchange}})],2):t._e(),t.nodatas?t._e():a("div",{staticClass:"nodatas"},[t._v("还没有菜品数据")])]),a("div",{staticStyle:{height:"120px"}})])},n=[],i=(a("96cf"),a("3b8d")),r={data:function(){return{loading:!0,nodatas:!0,shelfload:-1,tablist:["创建时间","类目","菜品名称","菜品图片","价格(元)","操作"],tabcont:[],currentnum:1,total:0,pagenum:0}},methods:{currentchange:function(t){this.pagenum=t-1,this.obtaindishes()},obtaindishes:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new this.Request(this.Urls.m().obtaindishes+"?page="+this.pagenum).modeget();case 3:e=t.sent,this.nodatas=0!=e.data.data.total,this.tabcont=e.data.data.result,this.total=e.data.data.total,this.loading=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),this.loading=!1,new this.mytitle(this.$message,"error","服务器发生错误,请重试").funtitle();case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),edIt:function(t){this.$router.push({name:"upload",params:{item:t}})},shelf:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a,s){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.shelfload=a,n=this.$qs.stringify({id:e,value:s}),t.prev=2,t.next=5,new this.Request(this.Urls.m().fromsale+"?"+n).modeget();case 5:this.$set(this.tabcont[a],"onsale",!1),this.shelfload=-1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),this.shelfload=-1,new this.mytitle(this.$message,"error","下架失败，重试").funtitle();case 13:case"end":return t.stop()}}),t,this,[[2,9]])})));function e(e,a,s){return t.apply(this,arguments)}return e}()},created:function(){this.obtaindishes()}},l=r,o=(a("09b9"),a("2877")),c=Object(o["a"])(l,s,n,!1,null,"53895e74",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-fbf58768.00f65d8d.js.map
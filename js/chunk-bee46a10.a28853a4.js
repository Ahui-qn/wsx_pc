(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bee46a10"],{"0283":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ordering"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/dishes"}}},[t._v("菜品管理")]),i("el-breadcrumb-item",[t._v("添加菜品")])],1),i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loadmen,expression:"loadmen",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"content-view-ten"},[i("div",{staticClass:"image-view-title"},[i("div",{staticClass:"image-list"},[t._v("菜品类目")]),i("div",[i("el-select",{attrs:{placeholder:"请选择菜品类目"},model:{value:t.catevalue,callback:function(e){t.catevalue=e},expression:"catevalue"}},t._l(t.category,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),i("div",{staticClass:"image-view-title"},[i("div",{staticClass:"image-list"},[t._v("菜品名称")]),i("el-input",{attrs:{type:"text",placeholder:"请输入菜品名称",clearable:!0},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),i("div",{staticClass:"image-view-title"},[i("div",{staticClass:"image-list"},[t._v("菜品价格(元)")]),i("div",{staticClass:"upload-option"},[i("el-input",{attrs:{min:"0",type:"number",placeholder:"请输入菜品价格",clearable:!0},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),i("el-select",{attrs:{placeholder:"请选择菜品单位"},model:{value:t.compvalue,callback:function(e){t.compvalue=e},expression:"compvalue"}},t._l(t.company,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),"自定义单位"==t.compvalue?i("el-input",{attrs:{type:"text",placeholder:"请输入自定义单位",clearable:!0},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}}):t._e(),"自定义单位"==t.compvalue?i("div",{staticStyle:{"margin-right":"0 !important"}},[i("el-button",{staticStyle:{width:"100%",padding:"12px 20px"},attrs:{type:"success",size:"medium",loading:t.unitload,disabled:t.unitload},on:{click:function(e){return t.dishunit()}}},[t._v("添加自定义单位")])],1):t._e()],1)]),i("div",{staticClass:"image-view-title"},[i("div",{staticClass:"image-list"},[t._v("菜品图片")]),i("div",[i("el-upload",{attrs:{action:t.action,"list-type":"picture-card",name:"file",accept:".jpg,.png,.webp,.jfif,.jpeg",limit:1,"on-remove":t.bannerRemove,"on-success":t.bannerSuccess,"on-preview":t.handlepreview,multiple:!1,"on-error":t.onErr,"before-upload":t.project,"file-list":t.goodsimage}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),i("div",{staticClass:"image-button"},[i("el-button",{attrs:{type:"success",size:"medium",loading:t.load,disabled:t.load},on:{click:function(e){return t.bTn(t.but)}}},[t._v(t._s(t.but))])],1)])],1)},n=[],s=(i("7f7f"),i("d25f"),i("ac6a"),i("5df3"),i("96cf"),i("3b8d")),r={data:function(){return{loadmen:!1,category:[],company:[],action:this.Urls.m().uploadres,load:!1,unitload:!1,catevalue:"",name:"",price:"",compvalue:"",goodsimage:[],unit:"",but:"上架菜品",dialogImageUrl:"",dialogVisible:!1,pagenum:0,custom:!1,id:""}},methods:{handlepreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},onErr:function(t){this.loadmen=!1,this.$message.error("上传失败,尝试重新上传")},project:function(t){this.loadmen=!0},bannerRemove:function(t,e){this.goodsimage=[]},bannerSuccess:function(t,e,i){this.goodsimage.push({url:t.data,uid:e.uid}),this.loadmen=!1},obtaincate:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=new this.Request(this.Urls.m().obtaincate+"?page="+this.pagenum).modeget(),i=new this.Request(this.Urls.m().obtainunit).modeget(),Promise.all([e,i]).then((function(t){a.category=t[0].data.data.result,a.company=t[1].data.data,a.company.push({label:"自定义单位",value:"自定义单位",_id:"980",unid:"980"})})).catch((function(t){console.log(t)}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),dishunit:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.unitload=!0,e={unit:this.unit},t.prev=2,t.next=5,new this.Request(this.Urls.m().dishunit,this.$qs.stringify(e)).modepost();case 5:i=t.sent,200!=i.status?new this.mytitle(this.$message,"warning",i.data.msg).funtitle():(new this.mytitle(this.$message,"success",i.data.msg).funtitle(),this.compvalue="",this.unit="",this.obtaincate()),this.unitload=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),this.unitload=!1,new this.mytitle(this.$message,"error","服务器发生错误,请重试").funtitle();case 14:case"end":return t.stop()}}),t,this,[[2,10]])})));function e(){return t.apply(this,arguments)}return e}(),bTn:function(t){var e=this;this.load=!0;var i=this.category.filter((function(t,i){return t.value==e.catevalue})),a=0==i.length?"":i[0].cid,n={id:this.id,category:this.catevalue,name:this.name,unitprice:this.price,unit:"自定义单位"==this.compvalue?"":this.compvalue,image:JSON.stringify(this.goodsimage),value:a};"上架菜品"==t?this.purequest(n,t,this.Urls.m().uploaddishes):this.purequest(n,t,this.Urls.m().modifydishes)},purequest:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,i,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new this.Request(a,this.$qs.stringify(e)).modepost();case 3:n=t.sent,200!=n.status?new this.mytitle(this.$message,"warning",n.data.msg).funtitle():(new this.mytitle(this.$message,"success",n.data.msg).funtitle(),this.$router.push({name:"dishes"})),this.load=!1,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),this.load=!1,new this.mytitle(this.$message,"error","服务器发生错误,请重试").funtitle();case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e,i,a){return t.apply(this,arguments)}return e}()},created:function(){var t=this.$route.params;console.log(t),this.obtaincate(),"{}"!=JSON.stringify(t)&&(this.but="修改提交",this.id=t.item._id,this.catevalue=t.item.category,this.name=t.item.name,this.price=t.item.unitprice,this.compvalue=t.item.unit,this.goodsimage=t.item.image)}},l=r,o=(i("1eb4"),i("2877")),c=Object(o["a"])(l,a,n,!1,null,"622d1904",null);e["default"]=c.exports},"02f4":function(t,e,i){var a=i("4588"),n=i("be13");t.exports=function(t){return function(e,i){var s,r,l=String(n(e)),o=a(i),c=l.length;return o<0||o>=c?t?"":void 0:(s=l.charCodeAt(o),s<55296||s>56319||o+1===c||(r=l.charCodeAt(o+1))<56320||r>57343?t?l.charAt(o):s:t?l.slice(o,o+2):r-56320+(s-55296<<10)+65536)}}},"0a49":function(t,e,i){var a=i("9b43"),n=i("626a"),s=i("4bf8"),r=i("9def"),l=i("cd1c");t.exports=function(t,e){var i=1==t,o=2==t,c=3==t,u=4==t,d=6==t,m=5==t||d,h=e||l;return function(e,l,p){for(var f,v,g=s(e),b=n(g),y=a(l,p,3),w=r(b.length),S=0,L=i?h(e,w):o?h(e,0):void 0;w>S;S++)if((m||S in b)&&(f=b[S],v=y(f,S,g),t))if(i)L[S]=v;else if(v)switch(t){case 3:return!0;case 5:return f;case 6:return S;case 2:L.push(f)}else if(u)return!1;return d?-1:c||u?u:L}}},1169:function(t,e,i){var a=i("2d95");t.exports=Array.isArray||function(t){return"Array"==a(t)}},"1eb4":function(t,e,i){"use strict";i("917e")},"2f21":function(t,e,i){"use strict";var a=i("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"5df3":function(t,e,i){"use strict";var a=i("02f4")(!0);i("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=a(e,i),this._i+=t.length,{value:t,done:!1})}))},"917e":function(t,e,i){},ac6a:function(t,e,i){for(var a=i("cadf"),n=i("0d58"),s=i("2aba"),r=i("7726"),l=i("32e9"),o=i("84f2"),c=i("2b4c"),u=c("iterator"),d=c("toStringTag"),m=o.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=n(h),f=0;f<p.length;f++){var v,g=p[f],b=h[g],y=r[g],w=y&&y.prototype;if(w&&(w[u]||l(w,u,m),w[d]||l(w,d,g),o[g]=m,b))for(v in a)w[v]||s(w,v,a[v],!0)}},cd1c:function(t,e,i){var a=i("e853");t.exports=function(t,e){return new(a(t))(e)}},d25f:function(t,e,i){"use strict";var a=i("5ca1"),n=i("0a49")(2);a(a.P+a.F*!i("2f21")([].filter,!0),"Array",{filter:function(t){return n(this,t,arguments[1])}})},e853:function(t,e,i){var a=i("d3f4"),n=i("1169"),s=i("2b4c")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),a(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-bee46a10.a28853a4.js.map